#E绅士爬虫项目

早就想干这个了，把E绅士上所有收藏数大于500的同人志筛选出来然后淦TM的撸爆

然而E绅士并没有提供这种功能

所以我就自己做了...也算是练一练手。

由于原代码里有敏感内容：我的常用密码、我的VPS的IP等，所以这个项目彻底跑完后我才将所有代码放上来，结果就是...git的描述乱到爆炸。

#项目依赖

本项目使用的python版本为python3.5，稍微改改应该能做到py2、py3兼容。（说得好像谁会fork这个项目一样）

requests、pymysql、BeautifulSoup4、IPProxyPool。  
注：

* [IPProxyPool](https://github.com/qiyeboy/IPProxyPool)是一个爬取代理IP的爬虫，本项目中的IP池模块基于该项目运行
* IPProxyPool模块另有其自身的依赖，请移步至项目地址查看其所需依赖

#项目介绍

Proxy为IP池模块，需要**手动运行IPProxyPool**项目才能正常工作

crawler文件夹内为各种爬虫模块：目录爬虫、API爬虫、e绅士爬虫，和对几个爬虫模块进行封装的上层模块

database文件夹内为创建、写数据表的各模块（没有读）

error文件夹中存放了一些自定义错误

objectvalue文件夹中存放了一个实体类

test文件夹中是一些测试特性用语句，与项目无关

main文件为主程序

SQLErrorlog.txt存放写入数据库时发生的错误，一般是字段长度的问题或者编码问题  
log.txt存放除SQL错误外的其他错误  
lastpage&index.txt存放上次爬取到的位置，重启爬虫时可以直接重启不需要再手动设置


###如果谁真要拿去运行的话，运行顺序是这样。
___
1. 先准备一个**EX绅士**的帐号，要求注册时间超过2周

2. 照着网上的各种反熊猫的教程**获取EX绅士的cookie**，并设置config的相关属性

3. **手动运行**database/newdatabase中的newdatabase，创建数据库

4. 运行IPProxyPool项目，由于IPProxyPool项目爬取IP需要一定的时间，请等待IPProxyPool运行一段时间后再运行爬虫

4. 运行main模块
___
为了不给E绅士的服务器带来太大负担（毕竟大家都是白嫖的），请使用尽量保守的爬虫策略。



##后续
可能会做一个协程版本出来，然后做成长期运行的东西，用来获取E绅士最近三天收藏数最多的日文和中文本，毕竟E绅士的热门功能跟翔一样，一堆western的不要太瞎狗眼。


另外准备对手上的数据做一下简单的数据分析（跟风搞一下大数据，然而48W条数据算什么大数据）  
更新：基础数据分析已经做完了，所有收藏数大于500的本子目录我发在**bilibili吧**了，请善用贴吧搜索，但**不要挖坟**


数据分析完毕后可能会共享出来，大家一起淦他娘的撸爆  
更新：数据已经放出来了，但不是公开，只给了找我要且有正常需求的几位,如果还有需要的请在知乎私信或在github这边留言（不怎么看）

## 更新
2017-2-8 重构代码，现在只需要运行一个main模块就可以开启爬虫，增加了断点记录功能。
